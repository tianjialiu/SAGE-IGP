/**** Start of imports. If edited, may not auto-convert in the playground. ****/
var indiaShp = ee.FeatureCollection("projects/GlobalFires/IndiaAgFires/IND_adm1"),
    indiaShpDist = ee.FeatureCollection("projects/GlobalFires/IndiaAgFires/IND_adm2"),
    mod14a1 = ee.ImageCollection("MODIS/006/MOD14A1"),
    mod09ga = ee.ImageCollection("MODIS/006/MOD09GA"),
    mod44b = ee.ImageCollection("MODIS/006/MOD44B");
/***** End of imports. If edited, may not auto-convert in the playground. *****/
// ====================================
// Input parameters for SAGE-IGP
// ====================================
// @author: Tianjia Liu
// Last updated: May 9, 2020
// ------------------------------------

// Time Parameters
var sYear = 2003;
var eYear = 2018;

var days_of_month_nonleap = [31,28,31,30,31,30,31,31,30,31,30,31];
var days_of_month_leap = [31,29,31,30,31,30,31,31,30,31,30,31];

var nDayList = {
  2000: 366, 2001: 365, 2002: 365, 2003: 365,
  2004: 366, 2005: 365, 2006: 365, 2007: 365,
  2008: 366, 2009: 365, 2010: 365, 2011: 365,
  2012: 366, 2013: 365, 2014: 365, 2015: 365,
  2016: 366, 2017: 365, 2018: 365, 2019: 365,
  2020: 366, 2021: 365, 2022: 365, 2023: 365
};

var nDayMonthList = {
  2000: days_of_month_leap, 2001: days_of_month_nonleap, 2002: days_of_month_nonleap, 2003: days_of_month_nonleap,
  2004: days_of_month_leap, 2005: days_of_month_nonleap, 2006: days_of_month_nonleap, 2007: days_of_month_nonleap,
  2008: days_of_month_leap, 2009: days_of_month_nonleap, 2010: days_of_month_nonleap, 2011: days_of_month_nonleap,
  2012: days_of_month_leap, 2013: days_of_month_nonleap, 2014: days_of_month_nonleap, 2015: days_of_month_nonleap,
  2016: days_of_month_leap, 2017: days_of_month_nonleap, 2018: days_of_month_nonleap, 2019: days_of_month_nonleap,
  2020: days_of_month_leap, 2021: days_of_month_nonleap, 2022: days_of_month_nonleap, 2023: days_of_month_nonleap,
};

var monthStrList = ['01','02','03','04','05','06','07','08','09','10','11','12'];

// Projections
var modis250m = ee.Image(mod44b.select('Percent_NonVegetated').first());
var modis500m = ee.Image(mod09ga.select('sur_refl_b07').first());
var modis1km = ee.Image(mod14a1.select('MaxFRP').first());

// Global Functions
var getQABits = function(image, start, end, newName) {
  // Compute the bits we need to extract
  var pattern = 0;
  for (var i = start; i <= end; i++) {
     pattern += Math.pow(2, i);
  }
  return image.select([0], [newName])
                .bitwiseAnd(pattern)
                .rightShift(start);
};

var filterDistricts = function(district) {
   return indiaShpDist.filterMetadata('DISTRICT','equals',district).first();
};

var filterStates = function(state) {
   return indiaShp.filterMetadata('STATE','equals',state).first();
};

// Export Variables
exports.getQABits = getQABits;
exports.filterDistricts = filterDistricts;
exports.filterStates = filterStates;
exports.modis250m = modis250m;
exports.modis500m = modis500m;
exports.modis1km = modis1km;
exports.sYear = sYear;
exports.eYear = eYear;
exports.nDayMonthList = nDayMonthList;
exports.nDayList = nDayList;
exports.monthStrList = monthStrList;

// Grid IDs
var gridIDsList = {
  'Punjab': [330784,332222,332223,332224,333660,333661,333662,333663,333664,335099,
    335100,335101,335102,335103,335104,336538,336539,336540,336541,336542,336543,
    336544,336545,337979,337980,337981,337982,337983,337984,337985,337986,337987,
    339419,339420,339421,339422,339423,339424,339425,339426,339427,340858,340859,
    340860,340861,340862,340863,340864,340865,340866,340867,340868,342296,342297,
    342298,342299,342300,342301,342302,342303,342304,342305,342306,342307,342308,
    343736,343737,343738,343739,343740,343741,343742,343743,343744,343745,343746,
    343747,343748,345176,345177,345178,345179,345180,345181,345182,345183,345184,
    345185,345186,345187,346616,346617,346618,346619,346620,346621,346622,346623,
    346624,346625,346626,348061,348062,348063,348064,348065],
  'Haryana': [340868,340869,342308,342309,343747,343748,343749,343750,343751,345185,
    345186,345187,345188,345189,345190,345191,346618,346619,346620,346621,346622,
    346623,346624,346625,346626,346627,346628,346629,346630,348058,348059,348060,
    348061,348062,348063,348064,348065,348066,348067,348068,348069,349499,349500,
    349501,349502,349503,349504,349505,349506,349507,349508,349509,350941,350942,
    350943,350944,350945,350946,350947,350948,350949,352382,352383,352384,352385,
    352386,352387,352388,352389,353823,353824,353825,353826,353827,353828,353829,
    353830,355263,355264,355265,355266,355267,355268,355269,355270,355271,356704,
    356705,356706,356707,356708,356709,356710,356711,358144,358145,358147,358148,
    358149,358150,358151,359588,359589],
  'Bihar': [359617,361056,361057,361058,361059,362496,362497,362498,362499,362500,
    363937,363938,363939,363940,363941,363942,363943,365376,365377,365378,365379,
    365380,365381,365382,365383,365384,365385,365386,365387,365388,365389,365393,
    366816,366817,366818,366819,366820,366821,366822,366823,366824,366825,366826,
    366827,366828,366829,366830,366831,366832,366833,366834,368257,368258,368259,
    368260,368261,368262,368263,368264,368265,368266,368267,368268,368269,368270,
    368271,368272,368273,369697,369698,369699,369700,369701,369702,369703,369704,
    369705,369706,369707,369708,369709,369710,369711,369712,371136,371137,371138,
    371139,371140,371141,371142,371143,371144,371145,371146,371147,371148,371149,
    371150,371151,371152,371153,372574,372575,372576,372577,372578,372579,372580,
    372581,372582,372583,372584,372585,372586,372587,372588,372589,372590,372591,
    372592,372593,374014,374015,374016,374017,374018,374019,374020,374021,374022,
    374023,374024,374025,374026,374027,374028,374029,374030,374031,374032,375454,
    375455,375456,375457,375458,375459,375460,375461,375462,375463,375464,375465,
    375466,375467,375468,375469,376894,376895,376896,376897,376898,376899,376900,
    376901,376902,376903,376904,376905,376906,376907,376908,376909,378337,378338,
    378339,378340,378341,378342,378346,378347],
  'Uttar Pradesh': [343751,343752,345190,345191,345192,346629,346630,346631,346632,
    346634,348069,348070,348071,348072,348073,348074,348075,349509,349510,349511,
    349512,349513,349514,349515,349516,350949,350950,350951,350952,350953,350954,
    350955,350956,350957,352389,352390,352391,352392,352393,352394,352395,352396,
    352397,352398,352399,352400,352401,352402,353830,353831,353832,353833,353834,
    353835,353836,353837,353838,353839,353840,353841,353842,353843,353844,355270,
    355271,355272,355273,355274,355275,355276,355277,355278,355279,355280,355281,
    355282,355283,355284,355285,355286,356710,356711,356712,356713,356714,356715,
    356716,356717,356718,356719,356720,356721,356722,356723,356724,356725,356726,
    356727,358150,358151,358152,358153,358154,358155,358156,358157,358158,358159,
    358160,358161,358162,358163,358164,358165,358166,358167,358168,358169,358170,
    359590,359591,359592,359593,359594,359595,359596,359597,359598,359599,359600,
    359601,359602,359603,359604,359605,359606,359607,359608,359609,359610,359611,
    359612,361030,361031,361032,361033,361034,361035,361036,361037,361038,361039,
    361040,361041,361042,361043,361044,361045,361046,361047,361048,361049,361050,
    361051,361052,361053,361054,361055,361056,362471,362472,362473,362474,362475,
    362476,362477,362478,362479,362480,362481,362482,362483,362484,362485,362486,
    362487,362488,362489,362490,362491,362492,362493,362494,362495,362496,362497,
    363910,363911,363912,363913,363914,363915,363916,363917,363918,363919,363920,
    363921,363922,363923,363924,363925,363926,363927,363928,363929,363930,363931,
    363932,363933,363934,363935,363936,363937,363938,365350,365355,365356,365357,
    365358,365359,365360,365361,365362,365363,365364,365365,365366,365367,365368,
    365369,365370,365371,365372,365373,365374,365375,365376,365377,365378,366797,
    366798,366799,366800,366801,366802,366803,366804,366805,366806,366807,366808,
    366809,366810,366811,366812,366813,366814,366815,366816,366817,368236,368237,
    368238,368239,368240,368241,368242,368243,368244,368245,368246,368247,368248,
    368249,368250,368251,368252,368253,368254,368255,368256,368257,369676,369677,
    369678,369679,369680,369681,369682,369683,369684,369685,369686,369687,369688,
    369689,369690,369691,369692,369693,369694,369695,369696,369697,369698,369699,
    371114,371115,371116,371117,371118,371119,371120,371121,371122,371123,371124,
    371125,371126,371127,371128,371129,371130,371131,371132,371133,371134,371135,
    371136,371137,371138,371139,372554,372555,372556,372557,372558,372559,372560,
    372561,372562,372563,372564,372565,372566,372567,372568,372569,372570,372571,
    372572,372573,372574,372575,372576,373994,373995,373996,373997,373998,373999,
    374000,374002,374003,374004,374005,374006,374007,374008,374009,374010,374011,
    374012,374013,374014,375433,375434,375435,375436,375442,375443,375444,375445,
    375448,375449,375450,375451,375452,375453,375454,376873,376874,376875,376876,
    376889,376890,376891,376892,376893,376894,376895,378313,378314,378315,378316,
    378331,378332,378333,378334,379755,379756,379771,379772,379773,379774,381212,
    381213],
  'Rajasthan': [345175,345176,346614,346615,346616,346617,346618,346619,348053,
    348054,348055,348056,348057,348058,348059,349493,349494,349495,349496,349497,
    349498,349499,349500,349501,349502,350932,350933,350934,350935,350936,350937,
    350938,350939,350940,350941,350942,350943,352371,352372,352373,352374,352375,
    352376,352377,352378,352379,352380,352381,352382,352383,353812,353813]
};
    
exports.gridIDsList = gridIDsList;